// Compiled by ClojureScript 1.11.60 {:optimizations :simple}
goog.provide('portfolio.views.canvas.split');
goog.require('cljs.core');
goog.require('portfolio.components.canvas_toolbar_buttons');
goog.require('portfolio.views.canvas.protocols');
goog.require('portfolio.icons.rows');
goog.require('portfolio.icons.columns');
goog.require('portfolio.icons.cross');
portfolio.views.canvas.split.split_layout = (function portfolio$views$canvas$split$split_layout(layout,path,dir){
if(cljs.core._EQ_.call(null,(1),cljs.core.count.call(null,path))){
var vec__16619 = path;
var x = cljs.core.nth.call(null,vec__16619,(0),null);
var G__16622 = layout;
var G__16622__$1 = ((cljs.core._EQ_.call(null,dir,new cljs.core.Keyword(null,"kind","kind",-717265803).cljs$core$IFn$_invoke$arity$1(layout)))?cljs.core.update.call(null,G__16622,new cljs.core.Keyword(null,"xs","xs",649443341),(function (xs){
return cljs.core.vec.call(null,cljs.core.mapcat.call(null,(function (col,i){
if(cljs.core._EQ_.call(null,i,x)){
return new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [col,col], null);
} else {
return new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [col], null);
}
}),xs,cljs.core.range.call(null)));
})):G__16622);
if(cljs.core.not_EQ_.call(null,dir,new cljs.core.Keyword(null,"kind","kind",-717265803).cljs$core$IFn$_invoke$arity$1(layout))){
return cljs.core.update.call(null,G__16622__$1,new cljs.core.Keyword(null,"xs","xs",649443341),(function (xs){
return cljs.core.mapv.call(null,(function (col,i){
if(cljs.core._EQ_.call(null,i,x)){
return new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"kind","kind",-717265803),dir,new cljs.core.Keyword(null,"xs","xs",649443341),new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [col,col], null)], null);
} else {
return col;
}
}),xs,cljs.core.range.call(null));
}));
} else {
return G__16622__$1;
}
} else {
return cljs.core.update_in.call(null,layout,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"xs","xs",649443341),cljs.core.first.call(null,path)], null),portfolio.views.canvas.split.split_layout,cljs.core.rest.call(null,path),dir);
}
});
portfolio.views.canvas.split.split_layout_horizontally = (function portfolio$views$canvas$split$split_layout_horizontally(layout,path){
return portfolio.views.canvas.split.split_layout.call(null,layout,path,new cljs.core.Keyword(null,"rows","rows",850049680));
});
portfolio.views.canvas.split.prepare_horizontal_split_button = (function portfolio$views$canvas$split$prepare_horizontal_split_button(tool,state,p__16623){
var map__16624 = p__16623;
var map__16624__$1 = cljs.core.__destructure_map.call(null,map__16624);
var pane_path = cljs.core.get.call(null,map__16624__$1,new cljs.core.Keyword(null,"pane-path","pane-path",-316302892));
var layout_path = cljs.core.get.call(null,map__16624__$1,new cljs.core.Keyword(null,"layout-path","layout-path",-654991240));
var layout = cljs.core.get.call(null,map__16624__$1,new cljs.core.Keyword(null,"layout","layout",-2120940921));
return cljs.core.with_meta.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),new cljs.core.Keyword(null,"title","title",636505583).cljs$core$IFn$_invoke$arity$1(tool),new cljs.core.Keyword(null,"icon","icon",1679606541),portfolio.icons.rows.icon,new cljs.core.Keyword(null,"actions","actions",-812656882),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"assoc-in","assoc-in",-1754117270),layout_path,portfolio.views.canvas.split.split_layout_horizontally.call(null,layout,pane_path)], null)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Symbol("portfolio.views.canvas.protocols","render-toolbar-button","portfolio.views.canvas.protocols/render-toolbar-button",-474027607,null),new cljs.core.Var(function(){return portfolio.components.canvas_toolbar_buttons.Button;},new cljs.core.Symbol("portfolio.components.canvas-toolbar-buttons","Button","portfolio.components.canvas-toolbar-buttons/Button",1140280554,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"portfolio.components.canvas-toolbar-buttons","portfolio.components.canvas-toolbar-buttons",684710462,null),new cljs.core.Symbol(null,"Button","Button",-1787718586,null),"/Users/christian/.gitlibs/libs/no.cjohansen/portfolio/5f9d05e933a4e64af54740c016a7a81ddef583fc/src/portfolio/components/canvas_toolbar_buttons.cljs",12,1,24,24,cljs.core.List.EMPTY,null,(cljs.core.truth_(portfolio.components.canvas_toolbar_buttons.Button)?portfolio.components.canvas_toolbar_buttons.Button.cljs$lang$test:null)]))], null));
});
portfolio.views.canvas.split.horizontal_impl = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Symbol("portfolio.views.canvas.protocols","prepare-canvas","portfolio.views.canvas.protocols/prepare-canvas",1591467281,null),(function (_,el,opt){
return null;
}),new cljs.core.Symbol("portfolio.views.canvas.protocols","prepare-toolbar-button","portfolio.views.canvas.protocols/prepare-toolbar-button",127148166,null),new cljs.core.Var(function(){return portfolio.views.canvas.split.prepare_horizontal_split_button;},new cljs.core.Symbol("portfolio.views.canvas.split","prepare-horizontal-split-button","portfolio.views.canvas.split/prepare-horizontal-split-button",403687597,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"portfolio.views.canvas.split","portfolio.views.canvas.split",-1513421381,null),new cljs.core.Symbol(null,"prepare-horizontal-split-button","prepare-horizontal-split-button",-664960121,null),"/Users/christian/.gitlibs/libs/no.cjohansen/portfolio/5f9d05e933a4e64af54740c016a7a81ddef583fc/src/portfolio/views/canvas/split.cljs",38,1,33,33,cljs.core.list(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"tool","tool",341835057,null),new cljs.core.Symbol(null,"state","state",-348086572,null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"pane-path","pane-path",1324228635,null),new cljs.core.Symbol(null,"layout-path","layout-path",985540287,null),new cljs.core.Symbol(null,"layout","layout",-480409394,null)], null)], null)], null)),null,(cljs.core.truth_(portfolio.views.canvas.split.prepare_horizontal_split_button)?portfolio.views.canvas.split.prepare_horizontal_split_button.cljs$lang$test:null)]))], null);
portfolio.views.canvas.split.create_split_horizontally_tool = (function portfolio$views$canvas$split$create_split_horizontally_tool(config){
return cljs.core.with_meta.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"id","id",-1388402092),new cljs.core.Keyword("canvas","split-horizontally","canvas/split-horizontally",1909089480),new cljs.core.Keyword(null,"title","title",636505583),"Split horizontally"], null),portfolio.views.canvas.split.horizontal_impl);
});
portfolio.views.canvas.split.split_layout_vertically = (function portfolio$views$canvas$split$split_layout_vertically(layout,path){
return portfolio.views.canvas.split.split_layout.call(null,layout,path,new cljs.core.Keyword(null,"cols","cols",-1914801295));
});
portfolio.views.canvas.split.prepare_vertical_split_button = (function portfolio$views$canvas$split$prepare_vertical_split_button(tool,state,p__16625){
var map__16626 = p__16625;
var map__16626__$1 = cljs.core.__destructure_map.call(null,map__16626);
var pane_path = cljs.core.get.call(null,map__16626__$1,new cljs.core.Keyword(null,"pane-path","pane-path",-316302892));
var layout_path = cljs.core.get.call(null,map__16626__$1,new cljs.core.Keyword(null,"layout-path","layout-path",-654991240));
var layout = cljs.core.get.call(null,map__16626__$1,new cljs.core.Keyword(null,"layout","layout",-2120940921));
return cljs.core.with_meta.call(null,new cljs.core.PersistentArrayMap(null, 3, [new cljs.core.Keyword(null,"title","title",636505583),new cljs.core.Keyword(null,"title","title",636505583).cljs$core$IFn$_invoke$arity$1(tool),new cljs.core.Keyword(null,"icon","icon",1679606541),portfolio.icons.columns.icon,new cljs.core.Keyword(null,"actions","actions",-812656882),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"assoc-in","assoc-in",-1754117270),layout_path,portfolio.views.canvas.split.split_layout_vertically.call(null,layout,pane_path)], null)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Symbol("portfolio.views.canvas.protocols","render-toolbar-button","portfolio.views.canvas.protocols/render-toolbar-button",-474027607,null),new cljs.core.Var(function(){return portfolio.components.canvas_toolbar_buttons.Button;},new cljs.core.Symbol("portfolio.components.canvas-toolbar-buttons","Button","portfolio.components.canvas-toolbar-buttons/Button",1140280554,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"portfolio.components.canvas-toolbar-buttons","portfolio.components.canvas-toolbar-buttons",684710462,null),new cljs.core.Symbol(null,"Button","Button",-1787718586,null),"/Users/christian/.gitlibs/libs/no.cjohansen/portfolio/5f9d05e933a4e64af54740c016a7a81ddef583fc/src/portfolio/components/canvas_toolbar_buttons.cljs",12,1,24,24,cljs.core.List.EMPTY,null,(cljs.core.truth_(portfolio.components.canvas_toolbar_buttons.Button)?portfolio.components.canvas_toolbar_buttons.Button.cljs$lang$test:null)]))], null));
});
portfolio.views.canvas.split.vertical_impl = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Symbol("portfolio.views.canvas.protocols","prepare-canvas","portfolio.views.canvas.protocols/prepare-canvas",1591467281,null),(function (_,el,opt){
return null;
}),new cljs.core.Symbol("portfolio.views.canvas.protocols","prepare-toolbar-button","portfolio.views.canvas.protocols/prepare-toolbar-button",127148166,null),new cljs.core.Var(function(){return portfolio.views.canvas.split.prepare_vertical_split_button;},new cljs.core.Symbol("portfolio.views.canvas.split","prepare-vertical-split-button","portfolio.views.canvas.split/prepare-vertical-split-button",-549226293,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"portfolio.views.canvas.split","portfolio.views.canvas.split",-1513421381,null),new cljs.core.Symbol(null,"prepare-vertical-split-button","prepare-vertical-split-button",-1619983299,null),"/Users/christian/.gitlibs/libs/no.cjohansen/portfolio/5f9d05e933a4e64af54740c016a7a81ddef583fc/src/portfolio/views/canvas/split.cljs",36,1,54,54,cljs.core.list(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"tool","tool",341835057,null),new cljs.core.Symbol(null,"state","state",-348086572,null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"pane-path","pane-path",1324228635,null),new cljs.core.Symbol(null,"layout-path","layout-path",985540287,null),new cljs.core.Symbol(null,"layout","layout",-480409394,null)], null)], null)], null)),null,(cljs.core.truth_(portfolio.views.canvas.split.prepare_vertical_split_button)?portfolio.views.canvas.split.prepare_vertical_split_button.cljs$lang$test:null)]))], null);
portfolio.views.canvas.split.create_split_vertically_tool = (function portfolio$views$canvas$split$create_split_vertically_tool(config){
return cljs.core.with_meta.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"id","id",-1388402092),new cljs.core.Keyword("canvas","split-vertically","canvas/split-vertically",92240264),new cljs.core.Keyword(null,"title","title",636505583),"Split vertically"], null),portfolio.views.canvas.split.vertical_impl);
});
portfolio.views.canvas.split.close_pane = (function portfolio$views$canvas$split$close_pane(layout,path){
if(cljs.core._EQ_.call(null,(1),cljs.core.count.call(null,path))){
return cljs.core.update.call(null,layout,new cljs.core.Keyword(null,"xs","xs",649443341),(function (xs){
return cljs.core.vec.call(null,cljs.core.concat.call(null,cljs.core.take.call(null,cljs.core.first.call(null,path),xs),cljs.core.drop.call(null,(cljs.core.first.call(null,path) + (1)),xs)));
}));
} else {
return cljs.core.update_in.call(null,layout,new cljs.core.PersistentVector(null, 2, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"xs","xs",649443341),cljs.core.first.call(null,path)], null),portfolio.views.canvas.split.close_pane,cljs.core.rest.call(null,path));
}
});
portfolio.views.canvas.split.prepare_close_pane_button = (function portfolio$views$canvas$split$prepare_close_pane_button(tool,state,p__16627){
var map__16628 = p__16627;
var map__16628__$1 = cljs.core.__destructure_map.call(null,map__16628);
var pane_path = cljs.core.get.call(null,map__16628__$1,new cljs.core.Keyword(null,"pane-path","pane-path",-316302892));
var layout_path = cljs.core.get.call(null,map__16628__$1,new cljs.core.Keyword(null,"layout-path","layout-path",-654991240));
var layout = cljs.core.get.call(null,map__16628__$1,new cljs.core.Keyword(null,"layout","layout",-2120940921));
if(((1) < cljs.core.count.call(null,cljs.core.remove.call(null,new cljs.core.Keyword(null,"kind","kind",-717265803),cljs.core.filter.call(null,cljs.core.map_QMARK_,cljs.core.tree_seq.call(null,cljs.core.coll_QMARK_,cljs.core.identity,layout)))))){
return cljs.core.with_meta.call(null,new cljs.core.PersistentArrayMap(null, 4, [new cljs.core.Keyword(null,"title","title",636505583),new cljs.core.Keyword(null,"title","title",636505583).cljs$core$IFn$_invoke$arity$1(tool),new cljs.core.Keyword(null,"icon","icon",1679606541),portfolio.icons.cross.icon,new cljs.core.Keyword(null,"align","align",1964212802),new cljs.core.Keyword(null,"right","right",-452581833),new cljs.core.Keyword(null,"actions","actions",-812656882),new cljs.core.PersistentVector(null, 1, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Keyword(null,"assoc-in","assoc-in",-1754117270),layout_path,portfolio.views.canvas.split.close_pane.call(null,layout,pane_path)], null)], null)], null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Symbol("portfolio.views.canvas.protocols","render-toolbar-button","portfolio.views.canvas.protocols/render-toolbar-button",-474027607,null),new cljs.core.Var(function(){return portfolio.components.canvas_toolbar_buttons.Button;},new cljs.core.Symbol("portfolio.components.canvas-toolbar-buttons","Button","portfolio.components.canvas-toolbar-buttons/Button",1140280554,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"portfolio.components.canvas-toolbar-buttons","portfolio.components.canvas-toolbar-buttons",684710462,null),new cljs.core.Symbol(null,"Button","Button",-1787718586,null),"/Users/christian/.gitlibs/libs/no.cjohansen/portfolio/5f9d05e933a4e64af54740c016a7a81ddef583fc/src/portfolio/components/canvas_toolbar_buttons.cljs",12,1,24,24,cljs.core.List.EMPTY,null,(cljs.core.truth_(portfolio.components.canvas_toolbar_buttons.Button)?portfolio.components.canvas_toolbar_buttons.Button.cljs$lang$test:null)]))], null));
} else {
return null;
}
});
portfolio.views.canvas.split.close_impl = new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Symbol("portfolio.views.canvas.protocols","prepare-canvas","portfolio.views.canvas.protocols/prepare-canvas",1591467281,null),(function (_,el,opt){
return null;
}),new cljs.core.Symbol("portfolio.views.canvas.protocols","prepare-toolbar-button","portfolio.views.canvas.protocols/prepare-toolbar-button",127148166,null),new cljs.core.Var(function(){return portfolio.views.canvas.split.prepare_close_pane_button;},new cljs.core.Symbol("portfolio.views.canvas.split","prepare-close-pane-button","portfolio.views.canvas.split/prepare-close-pane-button",289553204,null),cljs.core.PersistentHashMap.fromArrays([new cljs.core.Keyword(null,"ns","ns",441598760),new cljs.core.Keyword(null,"name","name",1843675177),new cljs.core.Keyword(null,"file","file",-1269645878),new cljs.core.Keyword(null,"end-column","end-column",1425389514),new cljs.core.Keyword(null,"column","column",2078222095),new cljs.core.Keyword(null,"line","line",212345235),new cljs.core.Keyword(null,"end-line","end-line",1837326455),new cljs.core.Keyword(null,"arglists","arglists",1661989754),new cljs.core.Keyword(null,"doc","doc",1913296891),new cljs.core.Keyword(null,"test","test",577538877)],[new cljs.core.Symbol(null,"portfolio.views.canvas.split","portfolio.views.canvas.split",-1513421381,null),new cljs.core.Symbol(null,"prepare-close-pane-button","prepare-close-pane-button",1360068190,null),"/Users/christian/.gitlibs/libs/no.cjohansen/portfolio/5f9d05e933a4e64af54740c016a7a81ddef583fc/src/portfolio/views/canvas/split.cljs",32,1,80,80,cljs.core.list(new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"tool","tool",341835057,null),new cljs.core.Symbol(null,"state","state",-348086572,null),new cljs.core.PersistentArrayMap(null, 1, [new cljs.core.Keyword(null,"keys","keys",1068423698),new cljs.core.PersistentVector(null, 3, 5, cljs.core.PersistentVector.EMPTY_NODE, [new cljs.core.Symbol(null,"pane-path","pane-path",1324228635,null),new cljs.core.Symbol(null,"layout-path","layout-path",985540287,null),new cljs.core.Symbol(null,"layout","layout",-480409394,null)], null)], null)], null)),null,(cljs.core.truth_(portfolio.views.canvas.split.prepare_close_pane_button)?portfolio.views.canvas.split.prepare_close_pane_button.cljs$lang$test:null)]))], null);
portfolio.views.canvas.split.create_close_tool = (function portfolio$views$canvas$split$create_close_tool(config){
return cljs.core.with_meta.call(null,new cljs.core.PersistentArrayMap(null, 2, [new cljs.core.Keyword(null,"id","id",-1388402092),new cljs.core.Keyword("canvas","close","canvas/close",-1142649018),new cljs.core.Keyword(null,"title","title",636505583),"Close pane"], null),portfolio.views.canvas.split.close_impl);
});
